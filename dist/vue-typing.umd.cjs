(function(e,o){typeof exports=="object"&&typeof module<"u"?module.exports=o(require("vue")):typeof define=="function"&&define.amd?define(["vue"],o):(e=typeof globalThis<"u"?globalThis:e||self,e.VueTyping=o(e.Vue))})(this,function(e){"use strict";const o={class:"sentence","data-id":"dmn-typing-sentence"};return e.defineComponent({__name:"dmnTyping",props:{sentences:{},minTypeSpeed:{default:50},maxTypeSpeed:{default:150},eraseSpeed:{default:100},eraseDelay:{default:1500},writeDelay:{default:0},caret:{default:"_"},loop:{type:Boolean,default:!1},tag:{default:"div"}},emits:["sentence:typed"],setup(y,{emit:g}){const t=y,T=g,r=e.ref(""),d=e.ref(0),a=e.ref(!1),s=e.ref(0),l=e.ref(0);let i,u;const h=e.computed(()=>({caret:!0,typing:a.value}));function v(){e.nextTick(()=>{i=setTimeout(c,t.writeDelay)})}function c(){var n;l.value<((n=t.sentences[s.value])==null?void 0:n.length)?(a.value=!0,S()):_()}function S(){r.value+=t.sentences[s.value].charAt(l.value),l.value+=1;const n=D(t.minTypeSpeed,t.maxTypeSpeed);i=setTimeout(c,n)}function _(){if(T("sentence:typed",t.sentences[s.value]),d.value+=1,!t.loop&&d.value===t.sentences.length){a.value=!1;return}t.loop?(a.value=!1,u=setTimeout(p,t.eraseDelay)):f()}function p(){l.value>0?(a.value=!0,C()):(a.value=!1,f())}function C(){r.value=t.sentences[s.value].substring(0,l.value-1),l.value-=1,u=setTimeout(p,t.eraseSpeed)}function f(){s.value=(s.value+1)%t.sentences.length,(t.loop||s.value>0)&&(a.value=!0,l.value=0,i=setTimeout(c,t.writeDelay))}function D(n,m){return Math.floor(Math.random()*(m-n+1))+n}function x(){clearTimeout(i),clearTimeout(u)}return v(),e.onUnmounted(()=>{x()}),(n,m)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.tag),{class:"dmn-typing","data-id":"dmn-typing"},{default:e.withCtx(()=>[e.renderSlot(n.$slots,"before",{dataId:"dmn-typing-before"}),e.createElementVNode("span",o,e.toDisplayString(r.value),1),e.createElementVNode("span",{class:e.normalizeClass(h.value),"data-id":"dmn-typing-caret"},e.toDisplayString(t.caret),3),e.renderSlot(n.$slots,"after",{dataId:"dmn-typing-after"})]),_:3}))}})});
